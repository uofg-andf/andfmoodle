define(["core/ajax"],function(a){const b=function(a){var b=document.getElementById("current_tab"),c=document.getElementById("past_tab"),e=document.getElementById("sortby_course"),f=document.getElementById("sortby_date"),g=document.getElementById("sortby_startdate"),h=document.getElementById("sortby_enddate"),i=!1;switch(a.target){case b:var j="current",k=0,l="coursetitle",m="asc";b.classList.add("active"),c.classList.remove("active"),d(j,k,l,m,i);break;case c:var j="past",k=0,l="coursetitle",m="asc";b.classList.remove("active"),c.classList.add("active"),d(j,k,l,m,i);break;case e:if(b.classList.contains("active"))var j="current";else var j="past";var k=0,l="coursetitle";"asc"==e.getAttribute("data-value")?(m="desc",e.setAttribute("data-value","desc"),e.classList.add("th-sort-desc"),e.classList.remove("th-sort-asc")):(m="asc",e.setAttribute("data-value","asc"),e.classList.add("th-sort-asc"),e.classList.remove("th-sort-desc")),d(j,k,l,m,i);break;case f:var j="current",k=0,l="duedate";"asc"==f.getAttribute("data-value")?(m="desc",f.setAttribute("data-value","desc"),f.classList.add("th-sort-desc"),f.classList.remove("th-sort-asc")):(m="asc",f.setAttribute("data-value","asc"),f.classList.add("th-sort-asc"),f.classList.remove("th-sort-desc")),d(j,k,l,m,i);break;case g:var j="past",k=0,l="startdate";"asc"==g.getAttribute("data-value")?(m="desc",g.setAttribute("data-value","desc"),g.classList.add("th-sort-desc"),g.classList.remove("th-sort-asc")):(m="asc",g.setAttribute("data-value","asc"),g.classList.add("th-sort-asc"),g.classList.remove("th-sort-desc")),d(j,k,l,m,i);break;case h:var j="past",k=0,l="enddate";"asc"==h.getAttribute("data-value")?(m="desc",h.setAttribute("data-value","desc"),h.classList.add("th-sort-desc"),h.classList.remove("th-sort-asc")):(m="asc",h.setAttribute("data-value","asc"),h.classList.add("th-sort-asc"),h.classList.remove("th-sort-desc")),d(j,k,l,m,i);break;default:}},c=function(a){var b=document.getElementById("menu_current_assessments_sortby"),c=document.getElementById("menu_past_assessments_sortby"),e=document.getElementById("sortby_course"),f=document.getElementById("sortby_date"),g=document.getElementById("sortby_startdate"),h=document.getElementById("sortby_enddate"),i=!1;switch(a.target){case b:var j="current",k=0,l=b.value,m="asc";"coursetitle"===b.value?(e.classList.add("th-sort-asc"),e.classList.remove("th-sort-desc"),e.setAttribute("data-value","asc")):(f.classList.add("th-sort-asc"),f.classList.remove("th-sort-desc"),f.setAttribute("data-value","asc")),d(j,k,l,m,i);break;case c:var j="past",k=0,l=c.value,m="asc";"coursetitle"===c.value?(e.classList.add("th-sort-asc"),e.classList.remove("th-sort-desc"),e.setAttribute("data-value","asc")):"startdate"===c.value?(g.classList.add("th-sort-asc"),g.classList.remove("th-sort-desc"),g.setAttribute("data-value","asc")):(h.classList.add("th-sort-asc"),h.classList.remove("th-sort-desc"),h.setAttribute("data-value","asc")),d(j,k,l,m,i);break;default:}},d=function(b,c,d,g,h){var i=document.querySelector(".block_gu_spdetails"),j=document.querySelector(".assessments-details-container"),k=document.getElementById("assessments_details_contents"),l=a.call([{methodname:"block_gu_spdetails_retrieve_assessments",args:{activetab:b,page:c,sortby:d,sortorder:g}}]);l[0].done(function(a){k.innerHTML=a.result,f(),e(d,g),h&&i.scrollIntoView()}).fail(function(a){if(a){var b=document.createElement("div");if(b.classList.add("alert","alert-danger"),a.hasOwnProperty("message")){var c=document.createElement("p");c.innerHTML=a.message,b.appendChild(c),c.classList.add("errormessage")}if(a.hasOwnProperty("moreinfourl")){var d=document.createElement("p"),e=document.createElement("a");e.setAttribute("href",a.moreinfourl),e.setAttribute("target","_blank"),e.innerHTML="More information about this error",b.appendChild(d),d.appendChild(e),d.classList.add("errorcode")}j.prepend(b)}})},e=function(a,b){var c=document.getElementById("sortby_course"),d=document.getElementById("sortby_date"),e=document.getElementById("sortby_startdate"),f=document.getElementById("sortby_enddate");switch(a){case"coursetitle":c&&("asc"===b?(c.classList.add("th-sort-asc"),c.classList.remove("th-sort-desc"),c.setAttribute("data-value","asc")):(c.classList.add("th-sort-desc"),c.classList.remove("th-sort-asc"),c.setAttribute("data-value","desc")));break;case"duedate":d&&("asc"===b?(d.classList.add("th-sort-asc"),d.classList.remove("th-sort-desc"),d.setAttribute("data-value","asc")):(d.classList.add("th-sort-desc"),d.classList.remove("th-sort-asc"),d.setAttribute("data-value","desc")));break;case"startdate":e&&("asc"===b?(e.classList.add("th-sort-asc"),e.classList.remove("th-sort-desc"),e.setAttribute("data-value","asc")):(e.classList.add("th-sort-desc"),e.classList.remove("th-sort-asc"),e.setAttribute("data-value","desc")));break;case"enddate":f&&("asc"===b?(f.classList.add("th-sort-asc"),f.classList.remove("th-sort-desc"),f.setAttribute("data-value","asc")):(f.classList.add("th-sort-desc"),f.classList.remove("th-sort-asc"),f.setAttribute("data-value","desc")));break;default:}},f=function(){var a=document.querySelectorAll("#assessments_details_contents .page-item a.page-link");a.forEach(function(a){if("#"!==a.getAttribute("href")){var b=new URL(a.getAttribute("href")),c=new URLSearchParams(b.search),e=c.get("activetab"),f=c.get("page"),g=c.get("sortby"),h=c.get("sortorder");a.addEventListener("click",function(a){a.preventDefault(),d(e,f,g,h,!0)})}else a.removeAttribute("href")})};return{init:function(){const a=document.querySelector(".assessments-details-container");if(a){var e=document.getElementById("current_tab"),f=document.getElementById("past_tab");e.classList.add("active"),f.classList.remove("active"),d("current",0,"coursetitle","asc",!1),a.addEventListener("change",c),a.addEventListener("click",b)}}}});
