define(["core/ajax"],function(a){const b=function(a){var b=document.getElementById("current_tab"),c=document.getElementById("past_tab"),e=document.getElementById("sortby_course"),f=document.getElementById("sortby_date"),g=document.getElementById("sortby_startdate"),h=document.getElementById("sortby_enddate");switch(a.target){case b:var i="current",j=0,k="coursetitle",l="asc";b.classList.add("active"),c.classList.remove("active"),d(i,j,k,l);break;case c:var i="past",j=0,k="coursetitle",l="asc";b.classList.remove("active"),c.classList.add("active"),d(i,j,k,l);break;case e:if(b.classList.contains("active"))var i="current";else var i="past";var j=0,k="coursetitle";"asc"==e.getAttribute("data-value")?(l="desc",e.setAttribute("data-value","desc"),e.classList.add("th-sort-desc"),e.classList.remove("th-sort-asc")):(l="asc",e.setAttribute("data-value","asc"),e.classList.add("th-sort-asc"),e.classList.remove("th-sort-desc")),d(i,j,k,l);break;case f:var i="current",j=0,k="duedate";"asc"==f.getAttribute("data-value")?(l="desc",f.setAttribute("data-value","desc"),f.classList.add("th-sort-desc"),f.classList.remove("th-sort-asc")):(l="asc",f.setAttribute("data-value","asc"),f.classList.add("th-sort-asc"),f.classList.remove("th-sort-desc")),d(i,j,k,l);break;case g:var i="past",j=0,k="startdate";"asc"==g.getAttribute("data-value")?(l="desc",g.setAttribute("data-value","desc"),g.classList.add("th-sort-desc"),g.classList.remove("th-sort-asc")):(l="asc",g.setAttribute("data-value","asc"),g.classList.add("th-sort-asc"),g.classList.remove("th-sort-desc")),d(i,j,k,l);break;case h:var i="past",j=0,k="enddate";"asc"==h.getAttribute("data-value")?(l="desc",h.setAttribute("data-value","desc"),h.classList.add("th-sort-desc"),h.classList.remove("th-sort-asc")):(l="asc",h.setAttribute("data-value","asc"),h.classList.add("th-sort-asc"),h.classList.remove("th-sort-desc")),d(i,j,k,l);break;default:}},c=function(a){var b=document.getElementById("menu_current_assessments_sortby"),c=document.getElementById("menu_past_assessments_sortby"),e=document.getElementById("sortby_course"),f=document.getElementById("sortby_date"),g=document.getElementById("sortby_startdate"),h=document.getElementById("sortby_enddate");switch(a.target){case b:var i="current",j=0,k=b.value,l="asc";"coursetitle"===b.value?(e.classList.add("th-sort-asc"),e.classList.remove("th-sort-desc"),e.setAttribute("data-value","asc")):(f.classList.add("th-sort-asc"),f.classList.remove("th-sort-desc"),f.setAttribute("data-value","asc")),d(i,j,k,l);break;case c:var i="past",j=0,k=c.value,l="asc";"coursetitle"===c.value?(e.classList.add("th-sort-asc"),e.classList.remove("th-sort-desc"),e.setAttribute("data-value","asc")):"startdate"===c.value?(g.classList.add("th-sort-asc"),g.classList.remove("th-sort-desc"),g.setAttribute("data-value","asc")):(h.classList.add("th-sort-asc"),h.classList.remove("th-sort-desc"),h.setAttribute("data-value","asc")),d(i,j,k,l);break;default:}},d=function(b,c,d,g){var h=document.querySelector(".assessments-details-container"),i=document.getElementById("assessments_details_contents"),j=a.call([{methodname:"block_gu_spdetails_retrieve_assessments",args:{activetab:b,page:c,sortby:d,sortorder:g}}]);j[0].done(function(a){i.innerHTML=a.result,f(),e(d,g)}).fail(function(a){if(a){var b=document.createElement("div");if(b.classList.add("alert","alert-danger"),a.hasOwnProperty("message")){var c=document.createElement("p");c.innerHTML=a.message,b.appendChild(c),c.classList.add("errormessage")}if(a.hasOwnProperty("moreinfourl")){var d=document.createElement("p"),e=document.createElement("a");e.setAttribute("href",a.moreinfourl),e.setAttribute("target","_blank"),e.innerHTML="More information about this error",b.appendChild(d),d.appendChild(e),d.classList.add("errorcode")}h.prepend(b)}})},e=function(a,b){var c=document.getElementById("sortby_course"),d=document.getElementById("sortby_date"),e=document.getElementById("sortby_startdate"),f=document.getElementById("sortby_enddate");switch(a){case"coursetitle":c&&("asc"===b?(c.classList.add("th-sort-asc"),c.classList.remove("th-sort-desc"),c.setAttribute("data-value","asc")):(c.classList.add("th-sort-desc"),c.classList.remove("th-sort-asc"),c.setAttribute("data-value","desc")));break;case"duedate":d&&("asc"===b?(d.classList.add("th-sort-asc"),d.classList.remove("th-sort-desc"),d.setAttribute("data-value","asc")):(d.classList.add("th-sort-desc"),d.classList.remove("th-sort-asc"),d.setAttribute("data-value","desc")));break;case"startdate":e&&("asc"===b?(e.classList.add("th-sort-asc"),e.classList.remove("th-sort-desc"),e.setAttribute("data-value","asc")):(e.classList.add("th-sort-desc"),e.classList.remove("th-sort-asc"),e.setAttribute("data-value","desc")));break;case"enddate":f&&("asc"===b?(f.classList.add("th-sort-asc"),f.classList.remove("th-sort-desc"),f.setAttribute("data-value","asc")):(f.classList.add("th-sort-desc"),f.classList.remove("th-sort-asc"),f.setAttribute("data-value","desc")));break;default:}},f=function(){var a=document.querySelectorAll("#assessments_details_contents .page-item a.page-link");a.forEach(function(a){if("#"!==a.getAttribute("href")){var b=new URL(a.getAttribute("href")),c=new URLSearchParams(b.search),e=c.get("activetab"),f=c.get("page"),g=c.get("sortby"),h=c.get("sortorder");a.addEventListener("click",function(a){a.preventDefault(),d(e,f,g,h)})}else a.removeAttribute("href")})};return{init:function(){const a=document.querySelector(".assessments-details-container");if(a){var e=document.getElementById("current_tab"),f=document.getElementById("past_tab");e.classList.add("active"),f.classList.remove("active"),d("current",0,"coursetitle","asc"),a.addEventListener("change",c),a.addEventListener("click",b)}}}});
